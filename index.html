<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

    <div class="style" id="header">
      <h1>Twittler</h1>
    </div>

    <div id="action">
      <button class="button">Show New Tweets</button>
    </div>

    <div class="tweets">
      <div id="messages"></div>
    </div>

    <script>

      $(document).ready(function(){

        var displayTweet = function(message){
            var tweet;
            if(message === 'original'){
              tweet = streams.home[index];
            }

            else{

              var tweet = streams.home[streams.home.length - 1];
            }

            var $tweet = $('<div></div>');
            $tweet.addClass('style tweets');
            $tweet.prependTo('#messages');

            var $user = $('<h3 class="user"></h3>');
            $user.text('@' + tweet.user);
            $user.appendTo($tweet);

            var $message = $('<p class="message"></p>');
            $message.text(tweet.message);
            $message.appendTo($tweet);

            var $time = $('<p class="time"></p>');
            $time.text(tweet.created_at);
            $time.appendTo($tweet);
        };

        var index = streams.home.length - 1;
        while(index >= 0){
            displayTweet('original');
            index -= 1;
        }

        var $button = $('.button');
        $button.on('click', function(){
          generateRandomTweet();
          displayTweet();
        });

        window.setInterval(function(){

          generateRandomTweet();
          displayTweet();
        }, Math.random() * 30000)

      });

    </script>
  </body>
</html>
